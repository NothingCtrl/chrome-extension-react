!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=83)}([function(e,t,n){e.exports=n(6)(59)},function(e,t,n){e.exports=n(5)(225)},function(e,t,n){e.exports=n(5)(224)},function(e,t,n){e.exports=n(5)(222)},function(e,t,n){"use strict";function r(e){return/^\/\//.test(e)?e.replace(/^/,window.location.protocol):e}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(o,a){var s=i({},e,n);fetch(r(t),s).then(function(e){s.jsonOutput===!0?e.json().then(o).catch(a):e.text().then(o).catch(a)}).catch(function(e){a(e)})})}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=o({method:"get",credentials:"include"}),s=o({method:"post",credentials:"include"}),u=o({method:"put",credentials:"same-origin",headers:new Headers({"Content-Type":"application/json"})}),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,r){chrome.runtime.sendMessage({service:"proxy",url:e,options:t},function(e){return e.resolve?n(e.resolve):void r(e.reject)})})},c=new Headers;c.append("pragma","no-cache"),c.append("cache-control","no-cache"),t.PROXY_GET=l,t.GET=a,t.POST=s,t.PUT=u,t.headerNoCache=c},function(e,t){e.exports=common_lib},function(e,t){e.exports=content_lib},function(e,t,n){e.exports=n(6)(228)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.unsavePost=t.savePost=t.getThreadList=t.unsubscribeThread=t.subscribeThread=t.updatePostTracker=t.removeQuickLink=t.saveQuickLink=t.updateQuickLink=t.addQuickLink=t.markAllQuoteSeen=t.updateQuotes=t.init=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(2),a=r(i),s=n(1),u=r(s),l=n(20);t.init=function(e){return o({},e,{type:l.VOZ_LIVING_INIT})},t.updateQuotes=function(e){return{type:l.VOZ_LIVING_UDATE_QUOTE_LIST,quotes:e}},t.markAllQuoteSeen=function(){return{type:l.VOZ_LIVING_SEEN_ALL_QUOTE}},t.addQuickLink=function(){return{type:l.VOZ_LIVING_ADD_QUICK_LINK}},t.updateQuickLink=function(e,t,n){return{type:l.VOZ_LIVING_UPDATE_QUICK_LINK,id:e,key:t,value:n}},t.saveQuickLink=function(){return{type:l.VOZ_LIVING_SAVE_QUICK_LINK}},t.removeQuickLink=function(e){return{type:l.VOZ_LIVING_REMOVE_QUICK_LINK,id:e}},t.updatePostTracker=function(e){return{type:l.VOZ_LIVING_UPDATE_POST_TRACKER,post:e}},t.subscribeThread=function(e,t){return{type:l.VOZ_LIVING_THREAD_SUBSCRIBE,threadId:e,post:t}},t.unsubscribeThread=function(e){return{type:l.VOZ_LIVING_THREAD_UNSUBSCRIBE,threadId:e}},t.getThreadList=function(){var e=(0,a.default)('#threadslist tbody[id^="threadbits_forum"] tr td[id^="td_threadtitle_"]'),t=u.default.map(e,function(e){var t=(0,a.default)(e),n=t.attr("id").match(/\d+/)[0],r=t.find(">div span > a"),o=r.eq(r.length-1).attr("href"),i=1;if(o){var s=o.match(/&page=(\d+)/);s&&(i=s[1])}return{id:n,pageNum:parseInt(i,10),element:t}});return{type:l.VOZ_LIVING_GET_THREAD_LIST,threadList:t}},t.savePost=function(e){return{type:l.VOZ_LIVING_SAVE_POST,postId:e}},t.unsavePost=function(e){return{type:l.VOZ_LIVING_UNSAVE_POST,postId:e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setChromeSyncStore=t.getChromeSyncStore=t.setChromeLocalStore=t.getChromeLocalStore=t.defaultStoreStructure=void 0;var o=n(1),i=r(o),a=t.defaultStoreStructure={settings:{wideScreen:!0,threadPreview:!0,adsRemove:!0,linkHelper:!0,notifyQuote:!0,emotionHelper:!0,minimizeQuote:!0,quickPostQuotation:!0,reloadButton:!0,autoGotoNewthread:!1,savePostEnable:!0,autoHideSidebar:!1,peerChatEnable:!1,capturePostEnable:!0,userStyle:"",delay:1,delayFollowThread:5},authInfo:{},quotes:[],quickLinks:[{id:"voz_living_f17",label:"F17",link:"https://vozforums.com/forumdisplay.php?f=17"},{id:"voz_living_f33",label:"F33",link:"https://vozforums.com/forumdisplay.php?f=33"}],followThreads:{},threadTracker:{},currentPost:{}},s={savedPosts:{}};t.default=a;var u=i.default.keys(a),l=t.getChromeLocalStore=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;return new Promise(function(r){chrome.storage[t].get(e,function(t){i.default.isEmpty(t)?!function(){var t={},o=e;i.default.isString(o)&&(o=[o]),o.forEach(function(e){t[e]=n[e]}),r(t)}():!function(){var o=t;e.forEach(function(e){i.default.isUndefined(o[e])&&(o[e]=n[e])}),r(o)}()})})},c=t.setChromeLocalStore=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local";return new Promise(function(n){chrome.storage[t].set(e,function(){return n(!0)})})};t.getChromeSyncStore=function(e){return l(e,"sync",s)},t.setChromeSyncStore=function(e){return c(e,"sync")}},function(e,t,n){e.exports=n(6)(227)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=null;return/forumdisplay/.test(window.location.pathname)?e="thread-list":/showthread/.test(window.location.pathname)?e="thread":/newreply/.test(window.location.pathname)?e="new-reply":/editpost/.test(window.location.pathname)&&(e="edit-reply"),e}function i(){var e="*:contains('You last') > *:contains('Welcome') > a[href*='member.php?u']",t=(0,s.default)(e).eq(0).text();if(""===t)return 0===(0,s.default)("#nologin-message").length&&(0,s.default)('.tborder:has(input[name="vb_login_username"])').before("<div id='nologin-message'>Bạn cần phải đăng nhập để sử dụng đầy đủ các chức năng của plugin</div>"),{isLogin:!1};new Function((0,s.default)("script:not([src]):contains('SECURITYTOKEN')").text().replace("SECURITYTOKEN","SECURITYTOKEN=window.SECURITYTOKEN")).call(window);var n=window.SECURITYTOKEN;return{isLogin:!0,token:n,username:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.toClassName=void 0,t.getCurrentView=o,t.getAuthenticationInformation=i;var a=n(2),s=r(a);t.toClassName=function(e){return Object.keys(e).reduce(function(t,n){return e[n]?t.concat([n]):t},[]).join(" ")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t="http://2.pik.vn/";return new Promise(function(n,r){s.default.ajax(t,{method:"POST",data:{image:e},xhrFields:{withCredentials:!0},dataType:"json"}).done(function(e,r){var o=e.saved;n(o?{url:t+o}:{})}).fail(function(e,t,n){return r(n)})})}function i(e){return new Promise(function(t){chrome.runtime.sendMessage({service:"image-upload",imageData:e},function(e){t(e)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.uploadImageToPikVn=o,t.uploadImage=i;var a=(n(4),n(2)),s=r(a)},function(e,t,n){"use strict";function r(e){return{getThreadTitle:function(){try{return document.querySelectorAll("td.navbar")[0].textContent.trim()}catch(e){return console.warn(e),""}},getThreadId:function(){var t=e.find("#threadtools_menu a[href*='t=']");if(t&&t.eq(0)&&t.eq(0).attr("href")){var n=t.eq(0).attr("href").match(/t=(\d+)/);if(null!==n&&n.length>0)return n[1]}return-1},getPage:function(){var t=0,n=e.find(".pagenav");return t=0===n.length?1:n.eq(0).find("tbody td.alt2 strong").text()},getLatestPost:function(){var t=e.find("table[id^='post']").last(),n=t.attr("id").match(/(\d+)/)[1],r=e.find("table[id^='post']").length;return{postNum:r,id:n}},getPostId:function(t){var n=e.find("table[id^='post']").eq(t),r=n.attr("id").match(/(\d+)/)[1];return r}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){e.exports=n(5)(221)},function(e,t,n){e.exports=n(6)(226)},function(e,t,n){"use strict";function r(){return(0,s.getChromeLocalStore)(["authInfo"]).then(function(e){var t=e.authInfo,n=t.isLogin,r=t.token;return n||alert("You need to login to perform this action"),r}).catch(function(e){return console.error(e)})}function o(e){return r().then(function(t){var n="//vozforums.com/subscription.php?do=doaddsubscription&threadid="+e,r=new FormData;return r.append("do","doaddsubscription"),r.append("securitytoken",t),r.append("s",""),r.append("threadid",e),r.append("url","http://vozforums.com/showthread.php?t="+e),r.append("emailupdate",0),r.append("folderid",0),(0,a.POST)(n,{body:r})})}function i(e){return r().then(function(){var t="//vozforums.com/subscription.php?do=removesubscription&t="+e;return(0,a.GET)(t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.prepare=r,t.subscribeThread=o,t.unsubscribeThread=i;var a=n(4),s=n(9)},,function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.val(),o=n.start,i=void 0===o?t.prop("selectionStart"):o,a=n.end,s=void 0===a?t.prop("selectionEnd"):a,u=r.substring(0,i),l=r.substring(s,r.length);return t.val(u+e+l),t[0].setSelectionRange(i+e.length,i+e.length),t.focus(),{start:i,end:s+e.length}}Object.defineProperty(t,"__esModule",{value:!0}),t.insertTextIntoEditor=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,l,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),d=r(f),p=n(21),h=r(p),m=n(3),v=(0,m.autobind)((l=u=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),c(t,[{key:"prepareEmotionUrl",value:function(e){var t=e;return t.indexOf("http")>-1?"":("/"!==t.charAt(0)&&(t="/"+t),"https://vozforums.com"+t)}},{key:"choseEmotion",value:function(e){this.props.onIconClick(e)}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"emotion-box"},h.default.map(function(t){return d.default.createElement("div",{className:"emo",key:t.text},d.default.createElement("img",{alt:t.text,src:e.prepareEmotionUrl(t.src),onClick:function(){return e.choseEmotion(t)}}))}))}}]),t}(f.Component),u.propTypes={onIconClick:f.PropTypes.func},s=l))||s;t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VOZ_LIVING_INIT="VOZ_LIVING_INIT",t.VOZ_LIVING_GET_THREAD_LIST="VOZ_LIVING_GET_THREAD_LIST",t.VOZ_LIVING_UDATE_QUOTE_LIST="VOZ_LIVING_UDATE_QUOTE_LIST",t.VOZ_LIVING_SEEN_ALL_QUOTE="VOZ_LIVING_SEEN_ALL_QUOTE",t.VOZ_LIVING_ADD_QUICK_LINK="VOZ_LIVING_ADD_QUICK_LINK",t.VOZ_LIVING_UPDATE_QUICK_LINK="VOZ_LIVING_UPDATE_QUICK_LINK",t.VOZ_LIVING_SAVE_QUICK_LINK="VOZ_LIVING_SAVE_QUICK_LINK",t.VOZ_LIVING_REMOVE_QUICK_LINK="VOZ_LIVING_REMOVE_QUICK_LINK",t.VOZ_LIVING_UPDATE_POST_TRACKER="VOZ_LIVING_UPDATE_POST_TRACKER",t.VOZ_LIVING_THREAD_SUBSCRIBE="VOZ_LIVING_THREAD_SUBSCRIBE",t.VOZ_LIVING_THREAD_UNSUBSCRIBE="VOZ_LIVING_THREAD_UNSUBSCRIBE",t.VOZ_LIVING_SAVE_POST="VOZ_LIVING_SAVE_POST",t.VOZ_LIVING_UNSAVE_POST="VOZ_LIVING_UNSAVE_POST"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[{text:":sexy:",src:"/images/smilies/Off/sexy_girl.gif"},{text:":byebye:",src:"/images/smilies/Off/byebye.gif"},{text:":look_down:",src:"/images/smilies/Off/look_down.gif"},{text:":stick:",src:"/images/smilies/Off/burn_joss_stick.gif"},{text:":adore:",src:"/images/smilies/Off/adore.gif"},{text:":nosebleed:",src:"/images/smilies/Off/nosebleed.gif"},{text:":beauty:",src:"/images/smilies/Off/beauty.gif"},{text:":gach:",src:"images/smilies/brick.png"},{text:':">',src:"/images/smilies/Off/embarrassed.gif"},{text:":surrender:",src:"/images/smilies/Off/surrender.gif"},{text:":pudency:",src:"/images/smilies/Off/pudency.gif"},{text:":sosad:",src:"/images/smilies/Off/too_sad.gif"},{text:":chaymau:",src:"/images/smilies/Off/nosebleed.gif"},{text:":go:",src:"/images/smilies/Off/go.gif"},{text:":sweat:",src:"/images/smilies/Off/sweat.gif"},{text:":canny:",src:"/images/smilies/Off/canny.gif"},{text:":sogood:",src:"/images/smilies/Off/feel_good.gif"},{text:":shame:",src:"/images/smilies/Off/shame.gif"},{text:":hungry:",src:"/images/smilies/Off/hungry.gif"},{text:":shot:",src:"/images/smilies/Off/beat_shot.gif"},{text:":rap:",src:"/images/smilies/Off/rap.gif"},{text:":hang:",src:"/images/smilies/Off/hang.gif"},{text:":*",src:"/images/smilies/Off/sweet_kiss.gif"},{text:":ops:",src:"/images/smilies/Off/ops.gif"},{text:":)",src:"/images/smilies/Off/smile.gif"},{text:":plaster:",src:"/images/smilies/Off/beat_plaster.gif"},{text:":tire:",src:"/images/smilies/Off/tire.gif"},{text:":brick:",src:"/images/smilies/Off/beat_brick.gif"},{text:":badsmell:",src:"/images/smilies/Off/bad_smelly.gif"},{text:":hell_boy:",src:"/images/smilies/Off/hell_boy.gif"},{text:":kool:",src:"/images/smilies/Off/cool.gif"},{text:":dribble:",src:"/images/smilies/Off/dribble.gif"},{text:":waaaht:",src:"/images/smilies/Off/waaaht.gif"},{text:":oh:",src:"/images/smilies/Off/oh.gif"},{text:":((",src:"/images/smilies/Off/cry.gif"},{text:"^:)^",src:"/images/smilies/Off/lay.gif"},{text:":aboom:",src:"/images/smilies/Off/after_boom.gif"},{text:":sad:",src:"/images/smilies/Off/sad.gif"},{text:":hug:",src:"/images/smilies/Off/hug.gif"},{text:":fix:",src:"/images/smilies/Off/fix.gif"},{text:":amazed:",src:"/images/smilies/Off/amazed.gif"},{text:":shitty:",src:"/images/smilies/Off/shit.gif"},{text:":what:",src:"/images/smilies/Off/what.gif"},{text:":cheers:",src:"/images/smilies/Off/cheers.gif"},{text:"-_-",src:"/images/smilies/Off/sleep.gif"},{text:":spam:",src:"/images/smilies/Off/spam.gif"},{text:":ah:",src:"/images/smilies/Off/ah.gif"},{text:":rofl:",src:"/images/smilies/Off/rofl.gif"},{text:":baffle:",src:"/images/smilies/Off/baffle.gif"},{text:":choler:",src:"/images/smilies/Off/choler.gif"},{text:":doubt:",src:"/images/smilies/Off/doubt.gif"},{text:":capture:",src:"/images/smilies/Off/capture.gif"},{text:":confident:",src:"/images/smilies/Off/confident.gif"},{text:":theft:",src:"/images/smilies/Off/theft.gif"},{text:":matrix:",src:"/images/smilies/Off/matrix.gif"},{text:":haha:",src:"/images/smilies/Off/haha.gif"},{text:":hehe:",src:"/images/smilies/Off/hehe.gif"},{text:":smoke:",src:"/images/smilies/Off/smoke.gif"},{text:":D",src:"/images/smilies/Off/big_smile.gif"},{text:":angry:",src:"/images/smilies/Off/angry.gif"},{text:":sos:",src:"/images/smilies/Off/sos.gif"},{text:":spiderman:",src:"/images/smilies/Off/spiderman.gif"},{text:":boss:",src:"/images/smilies/Off/boss.gif"},{text:":dreaming:",src:"/images/smilies/Off/still_dreaming.gif"},{text:":-s",src:"/images/smilies/Off/confuse.gif"},{text:":bike:",src:"/images/smilies/Off/bike.gif"},{text:":misdoubt:",src:"/images/smilies/Off/misdoubt.gif"},{text:":mage:",src:"/images/smilies/Off/mage.gif"},{text:":bye:",src:"/images/smilies/Off/bye.gif"},{text:":phone:",src:"/images/smilies/Off/phone.gif"},{text:":lmao:",src:"/images/smilies/Off/lmao.gif"},{text:":ot:",src:"/images/smilies/Off/ot.gif"},{text:":flame:",src:"/images/smilies/Off/flame.gif"},{text:":bang:",src:"/images/smilies/Off/bang.gif"},{text:":sure:",src:"/images/smilies/Off/sure.gif"},{text:":stupid:",src:"/images/smilies/emos/stupid.gif"},{text:":ban:",src:"/images/smilies/Off/bann.gif"},{text:":doublegun:",src:"/images/smilies/emos/doublegun.gif"},{text:":boom:",src:"/images/smilies/emos/boom.gif"},{text:":lol:",src:"/images/smilies/emos/lol.gif"},{text:":welcome:",src:"/images/smilies/Off/welcome.gif"},{text:":please:",src:"/images/smilies/Off/please.gif"},{text:":puke:",src:"/images/smilies/emos/puke.gif"},{text:":shit:",src:"/images/smilies/emos/shit.gif"},{text:":lovemachine:",src:"/images/smilies/emos/lovemachine.gif"},{text:":runrun:",src:"/images/smilies/Off/runrun.gif"},{text:":loveyou:",src:"/images/smilies/emos/loveyou.gif"},{text:":Birthday:",src:"/images/smilies/emos/Birthday.gif"},{text:":no:",src:"/images/smilies/emos/no.gif"},{text:":yes:",src:"/images/smilies/emos/yes.gif"},{text:":shoot1:",src:"/images/smilies/emos/shoot1.gif"},{text:":winner:",src:"/images/smilies/emos/winner.gif"},{text:":band:",src:"/images/smilies/emos/band.gif"},{text:":grin:",src:"/images/smilies/biggrin.gif"},{text:":frown:",src:"/images/smilies/frown.gif"},{text:":mad:",src:"/images/smilies/mad.gif"},{text:":p",src:"/images/smilies/tongue.gif"},{text:":embrass:",src:"/images/smilies/redface.gif"},{text:":confused:",src:"/images/smilies/confused.gif"},{text:";)",src:"/images/smilies/wink.gif"},{text:":rolleyes:",src:"/images/smilies/rolleyes.gif"},{text:":cool:",src:"/images/smilies/cool.gif"},{text:":eek:",src:"/images/smilies/eek.gif"}];t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.store=void 0;var o=n(0),i=r(o),a=n(27),s=n(7),u=n(79),l=r(u),c=n(78),f=r(c),d=n(77),p=r(d),h=n(60),m=r(h),v=n(62),y=r(v),g=(0,p.default)({level:"log"}),b=t.store=(0,a.createStore)(y.default,(0,a.applyMiddleware)(l.default,f.default,g));t.default=function(){return i.default.createElement(s.Provider,{store:b},i.default.createElement(m.default,null))}},function(e,t,n){"use strict";function r(e){var t=document.createElement("input");t.style.position="fixed",t.style.opacity=0,t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.copyText=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(/(?=[^ ])(h *t *t *p *: *\/ *\/ *)?(([a-zA-Z0-9-\.]+\.)?[a-zA-Z0-9-]{3,}\.(com|net|org|us|info|vn|com\.vn|net\.vn|gov\.vn|edu|edu\.vn)(\/)?([^\s\[]+)?)(?=\s|$|\[)/.test((0,f.default)(e).text())){var t=(0,f.default)(e).text().replace(/(?=[^ ])(h *t *t *p *: *\/ *\/ *)?(([a-zA-Z0-9-\.]+\.)?[a-zA-Z0-9-]{3,}\.(com|net|org|us|info|vn|com\.vn|net\.vn|gov\.vn|edu|edu\.vn)(\/)?([^\s\[]+)?)(?=\s|$|\[)/gi,"<a data-type='linkdetected' href='http://$2' target='_blank'>$2</a>");(0,f.default)(e).before(t),e.nodeValue=""}}function i(e,t){if(t){var n=e.find('a[data-type="linkdetected"]');if(n&&n.length>0)return}else e=e.find("[id^='post_message_']");e.each(function(){var e=this,t=(0,f.default)(this),n=t.contents(),r=t.find("*:not(a)").contents().filter(function(){return 3===e.nodeType});p.default.each(n,function(e){3===e.nodeType&&o(e)}),p.default.each(r,function(e){"a"!==e.parentNode.nodeName.toLowerCase()&&o(e)})})}function a(e){e.find("a[href*='redirect/index.php']").each(function(){var e=(0,f.default)(this),t=e.attr("href").match(/\?link=(.*)/)[1],n=decodeURIComponent(t);e.attr("href",n)})}function s(e,t){var n=null;if(t){n=e.find("a");var r=e.find('a[data-smartlink="image"]');if(r&&r.length>0)return}else n=e.find("[id^='post_message_'] a");n.each(function(){var e=(0,f.default)(this),t=e.attr("href");if(!(e.find("img").length>0)&&/\.(jpg|png|gif|bmp|jpeg)$/.test(t)){e.attr("data-smartlink","image");var n=(0,f.default)("<div>\n            \t<img src='"+t+"'\n            \t\ttitle='Tự động nhận diện link hình với voz living'/>\n        \t\t</div>");e.after(n)}})}function u(e,t){var n=void 0;if(t){n=e.find("a");var r=e.find('a[data-smartlink="youtube"]');if(r&&r.length>0)return}else n=e.find("[id^='post_message_'] a");n.each(function(){var e=(0,f.default)(this),t=e.attr("href"),n=t.match(/youtube\.com[^\s]+v=([a-zA-Z0-9_-]+)/i);if(null!==n&&0!==n.length||(n=t.match(/youtu\.be\/([a-zA-Z0-9_-]+)/i)),null!==n&&n.length>0){e.attr("data-smartlink","youtube");var r=(0,f.default)("<div><iframe width='560' height='315' src='https://www.youtube.com/embed/"+n[1]+"?rel=0'\n            \t\t\t\t\tframeborder='0' allowfullscreen\n            \t\t\t\t\ttitle='Có thể xảy ra sai sót trong việc tự động nhận biết youtube, nếu có xin vui lòng báo lỗi qua pm greans(@vozforum)'>\n        \t\t\t\t\t</iframe>\n\t\t\t\t\t</div>");e.after(r)}})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i(e,t),a(e),s(e,t),u(e,t),e}Object.defineProperty(t,"__esModule",{value:!0}),t.replaceTextWithLink=o,t.replaceLinks=i,t.removeRedirect=a,t.resolveImage=s,t.resolveYoutube=u,t.proccessLink=l;var c=n(2),f=r(c),d=n(1),p=r(d)},function(e,t,n){"use strict";function r(e){var t=document.createElement("a");t.href=e;var n=new MouseEvent("click",{canBubble:!0,cancelable:!0,view:window,ctrlKey:!0,metaKey:!0});return t.dispatchEvent(n),!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){var r,o,i;!function(a){o=[n(2)],r=a,i="function"==typeof r?r.apply(t,o):r,!(void 0!==i&&(e.exports=i))}(function(e){function t(){var t,n,r={height:l.innerHeight,width:l.innerWidth};return r.height||(t=u.compatMode,!t&&e.support.boxModel||(n="CSS1Compat"===t?c:u.body,r={height:n.clientHeight,width:n.clientWidth})),r}function n(){return{top:l.pageYOffset||c.scrollTop||u.body.scrollTop,left:l.pageXOffset||c.scrollLeft||u.body.scrollLeft}}function r(){if(s.length){var r=0,a=e.map(s,function(e){var t=e.data.selector,n=e.$element;return t?n.find(t):n});for(o=o||t(),i=i||n();r<s.length;r++)if(e.contains(c,a[r][0])){var u=e(a[r]),l={height:u[0].offsetHeight,width:u[0].offsetWidth},f=u.offset(),d=u.data("inview");if(!i||!o)return;f.top+l.height>i.top&&f.top<i.top+o.height&&f.left+l.width>i.left&&f.left<i.left+o.width?d||u.data("inview",!0).trigger("inview",[!0]):d&&u.data("inview",!1).trigger("inview",[!1])}}}var o,i,a,s=[],u=document,l=window,c=u.documentElement;e.event.special.inview={add:function(t){s.push({data:t,$element:e(this),element:this}),!a&&s.length&&(a=setInterval(r,250))},remove:function(e){for(var t=0;t<s.length;t++){var n=s[t];if(n.element===this&&n.data.guid===e.guid){s.splice(t,1);break}}s.length||(clearInterval(a),a=null)}},e(l).bind("scroll resize scrollstop",function(){o=i=null}),!c.addEventListener&&c.attachEvent&&c.attachEvent("onfocusin",function(){i=null})})},function(e,t,n){e.exports=n(6)(133)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(0),i=r(o),a=n(10),s=n(22),u=r(s),l=n(37),c=r(l);window.trackEvent=function(e,t,n){chrome.runtime.sendMessage({__ga:!0,category:e,action:t,label:n})},trackEvent("view-content",location.href),document.onreadystatechange=function(){if("interactive"===document.readyState){window.vozLivingLoader=c.default.init().start();var e=document.createElement("div");e.id="voz-living-app",document.body.appendChild(e),(0,a.render)(i.default.createElement(u.default,null),e)}}},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=n(2),d=r(f),p=(u=s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){this.removeAds(e)}},{key:"removeAds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.isRemoveAds;t&&((0,d.default)(".middleads+table > tbody > tr > td:eq(1) [id^=div-gpt-ad]").length>0&&(0,d.default)(".middleads+table > tbody > tr > td:eq(1)").remove(),(0,d.default)(".middleads+div > table > tbody > tr > td:eq(1)").remove(),(0,d.default)("[id^=div-gpt-ad]").hide(),(0,d.default)("[id^=google_ads_div],.middleads").hide())}},{key:"render",value:function(){return null}}]),t}(c.Component),s.propTypes={isRemoveAds:c.PropTypes.bool},u);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=n(2),c=r(l),f=n(1),d=r(f),p=n(76),h=r(p),m=n(12),v=n(23),y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hookToPost(),n}return a(t,e),s(t,[{key:"hookToPost",value:function(){var e=this;(0,c.default)(".voz-postbit td[id^=td_post_]").each(function(t,n){var r=(0,c.default)(n),o=(0,c.default)('<div class="voz-living-capture-post">\n      <a \n        href="javascript:void(0)"\n        class="tooltip-left voz-living-capture"\n        data-tooltip="Chụp bài viết"\n      >\n        <i class="fa fa-camera" />\n      </a></div>');o.find(" > a").on("click",e.capturePost.bind(e,r,o)),r.find("> div:last").append(o)})}},{key:"capturePost",value:function(e,t){t.find(".voz-living-capture-post-link").remove(),t.find(".voz-living-capture-post-image").remove();try{!function(){var n=(0,c.default)('<input class="voz-living-capture-post-link" type="text" size=30 value="Capturing by Voz Living" />');t.append(n),setTimeout(function(){(0,h.default)(e.parents("table.voz-postbit")[0]).then(function(e){return e.toDataURL("image/png")}).then(function(e){n.val("Uploading to pik.vn");var r=(0,c.default)('<a href="'+e+'" target="_blank" class="voz-living-capture-post-image"><i class="fa fa-file-photo-o" /></a>');return t.append(r),r.on("click",function(){setTimeout(function(){return r.remove()},500)}),(0,m.uploadImage)(e)}).then(function(e){var t=e.url;d.default.isUndefined(t)?n.val("Faild to upload"):n.val(t),n.on("click",function(){var e=100;d.default.isUndefined(t)||((0,v.copyText)(t),n.val("Coppied"),e=1e3),setTimeout(function(){return n.remove()},e)})}).catch(function(e){throw e})},100)}()}catch(e){alert("Có lỗi xảy ra, không thể chụp được bài viết này"),console.error(e)}}},{key:"render",value:function(){return null}}]),t}(u.Component);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),d=r(f),p=n(2),h=r(p),m=n(3),v=n(10),y=n(18),g=n(19),b=r(g),_=(0,m.autobind)((l=u=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.editor=null,n}return a(t,e),c(t,[{key:"componentWillReceiveProps",value:function(e){this.updateEmotionHelper(e)}},{key:"onIconClick",value:function(e){this.editor&&(0,y.insertTextIntoEditor)(e.text,this.editor)}},{key:"updateEmotionHelper",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.emotionHelper,n=e.currentView,r=0!==(0,h.default)(".smilebox").length;if(t&&!r&&("thread"===n||"new-reply"===n||"edit-reply"===n)){var o=null;if("thread"===n){if(this.editor=(0,h.default)("#vB_Editor_QR_textarea"),o=this.editor.parents("#vB_Editor_QR").eq(0),0===o.length)return}else"new-reply"!==n&&"edit-reply"!==n||(this.editor=(0,h.default)("#vB_Editor_001_textarea"),o=(0,h.default)("#vB_Editor_001_smiliebox"),o.find("table").remove());var i=document.createElement("div");i.className="smilebox",o.append(i),(0,v.render)(d.default.createElement(b.default,{onIconClick:this.onIconClick}),i)}}},{key:"render",value:function(){return null}}]),t}(f.Component),u.propTypes={emotionHelper:f.PropTypes.bool,currentView:f.PropTypes.string},s=l))||s;t.default=_},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return m.default.isEmpty(e)?[]:Object.keys(e).map(function(n){var r=e[n],o=r.page,i=r.postNum,a=r.title,s=t[n],u=s?s.postId:null,l=s?10*s.page+s.postNum:0,c=10*o+i,f=c-l;return{id:n,postId:u,numPostDiff:f,numPostFromTracker:l,numPostTotal:c,title:a}})}Object.defineProperty(t,"__esModule",{value:!0});var l,c,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(0),p=o(d),h=n(1),m=o(h),v=n(7),y=n(16),g=n(8),b=r(g),_=(c=l=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showThreadList:!1},n.dispatch=e.dispatch,n}return s(t,e),
f(t,[{key:"shouldComponentUpdate",value:function(e,t){return!m.default.isEqual(e.threadList,this.props.threadList)||!m.default.isEqual(t.showThreadList,this.state.showThreadList)}},{key:"getTime",value:function(e){var t=new Date(e);return t.getHours()+":"+t.getMinutes()+" "+t.getDay()+"-"+(t.getMonth()+1)+"-"+t.getFullYear()}},{key:"toggleThreadList",value:function(){var e=this.state.showThreadList;this.setState({showThreadList:!e})}},{key:"unsubscribe",value:function(e){var t=this;this.setState({isLoading:!0}),(0,y.unsubscribeThread)(e).then(function(){t.dispatch(b.unsubscribeThread(e))})}},{key:"renderThread",value:function(e){var t=this,n=e.id,r=e.postId,o=e.numPostDiff,i=e.title,a=null===r?"showthread.php?t="+n:"showthread.php?p="+r+"#post"+r;return p.default.createElement("div",{className:"quote-row",key:n},p.default.createElement("div",{className:"quote-title"},p.default.createElement("a",{href:a},i),p.default.createElement("span",{className:"pull-right",onClick:function(){return t.unsubscribe(n)},style:{marginRight:"10px",cursor:"pointer"}},p.default.createElement("span",{className:"fa fa-trash"}))),p.default.createElement("div",{className:"quote-bottom"},p.default.createElement("i",{className:"fa fa-arrow-right"})," Có ",o," bài mới"))}},{key:"render",value:function(){var e=this,t=this.props.threadList,n="btn tooltip-right "+(this.state.showThreadList?"active":"");return p.default.createElement("div",{className:"btn-group"},p.default.createElement("div",{className:n,onClick:function(){return e.toggleThreadList()},"data-tooltip":"Follow Threads"},p.default.createElement("i",{className:"fa fa-th-list"})),function(){return e.state.showThreadList?[p.default.createElement("div",{key:"voz-mask-quote-list",className:"voz-mask quote-list-mask",onClick:function(){return e.setState({showThreadList:!e.state.showThreadList})}}),p.default.createElement("div",{className:"btn-options",key:"quote-list"},p.default.createElement("h3",null,"Subscribed Threads"),p.default.createElement("div",{className:"quote-list"},t.map(function(t){return e.renderThread(t)})))]:null}())}}]),t}(d.Component),l.propTypes={settings:d.PropTypes.object,dispatch:d.PropTypes.func,threadList:d.PropTypes.array},l.defaultProps={threadList:[],settings:{}},c),w=function(e){var t=e.vozLiving,n=t.followThreads,r=t.settings,o=t.threadTracker,i=u(n,o);return{threadList:i,settings:r}};t.default=(0,v.connect)(w)(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=n(2),d=r(f),p=n(24),h=(u=s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){this.linkHelper(e)}},{key:"linkHelper",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=t.linkHelper;if(e){var n=(0,d.default)("body");(0,p.proccessLink)(n)}}},{key:"render",value:function(){return null}}]),t}(c.Component),s.propTypes={linkHelper:c.PropTypes.bool},u);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l,c,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(0),p=r(d),h=n(2),m=r(h),v=n(10),y=(u=s=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOpen:!1},n}return a(t,e),f(t,[{key:"render",value:function(){var e=this,t=this.state.isOpen,n=this.props.element;return p.default.createElement("div",{className:"mini-quote-wrapper"},p.default.createElement("div",{className:t?"quote open":"quote",dangerouslySetInnerHTML:{__html:n}}),p.default.createElement("div",{style:{textAlign:"center",position:"relative"}},p.default.createElement("div",{className:"btn btn-minimize-quote",onClick:function(){e.setState({isOpen:!e.state.isOpen})}},t?"Click to collapse quote":"Click to see full quote")))}}]),t}(d.Component),s.propTypes={element:d.PropTypes.any},u),g=(c=l=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),f(t,[{key:"componentWillReceiveProps",value:function(e){this.minimizeQuotes(e)}},{key:"minimizeQuotes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.isMinimizeQuote,n=e.maxHeight;if(t){var r=(0,m.default)("table.voz-bbcode-quote");r&&r.each(function(){var e=(0,m.default)(this).parent();if(e.height()>n){var t=e.html(),r=document.createElement("div");r.className="quote-minimize-wrapper",e.empty().append(r),(0,v.render)(p.default.createElement(y,{element:t}),r)}})}}},{key:"render",value:function(){return null}}]),t}(d.Component),l.propTypes={isMinimizeQuote:d.PropTypes.bool,maxHeight:d.PropTypes.number},l.defaultProps={isMinimizeQuote:!0,maxHeight:200},c);t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this.isLoading=!1,this.element=null}return o(e,[{key:"init",value:function(){if(!this.element){this.element=document.createElement("div"),this.element.id="voz-living-loader-wrapper";var e=document.createElement("div");e.id="voz-living-loader",this.element.appendChild(e),document.body.appendChild(this.element)}return this}},{key:"start",value:function(){return this.element&&(this.element.className="loading"),this}},{key:"stop",value:function(){this.element&&(this.element.className="")}}]),e}();e.exports=new i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=(r(u),n(2)),c=r(l),f=n(12),d=n(23),p=(n(11),n(18)),h='[INDENT][SIZE="1"][COLOR="Navy"]Hình này được tự động upload và chèn link bởi [URL="https://chrome.google.com/webstore/detail/voz-living/bpfbcbgognjimbmabiiphhofpgdcgbgc"]Voz Living[/URL][/COLOR][/SIZE][/INDENT]',m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bindPasteHandler(),n.state={status:null,text:""},n}return a(t,e),s(t,[{key:"bindPasteHandler",value:function(){document.addEventListener("paste",this.pasteHandler.bind(this))}},{key:"pasteHandler",value:function(e){var t=e.target;if("TEXTAREA"!==t.tagName.toUpperCase())return!0;var n=e.clipboardData.items;if(n)for(var r=0;r<n.length;r++){var o=n[r];if(/image/.test(o.type))return console.info("Image in clipboard detected"),this.insertImage(o.getAsFile(),(0,c.default)(t))}return!0}},{key:"insertImage",value:function(e,t){var n=this;if(this.setState({status:"processing"}),"string"==typeof e)return setTimeout(this.handleImageData.bind(this,e,t),1);var r=new FileReader;return r.readAsDataURL(e),r.onload=function(){n.handleImageData(r.result,t)},null}},{key:"handleImageData",value:function(e,t){var n=this,r=(0,p.insertTextIntoEditor)("__Uploading ..__",t);t.prop("disabled",!0),(0,f.uploadImage)(e).then(function(e){if(e.url){var o="[img]"+e.url+"[/img]\n"+h;t.prop("disabled",!1),(0,p.insertTextIntoEditor)(o,t,r),n.setState({status:"text",text:o})}else t.prop("disabled",!1),(0,p.insertTextIntoEditor)("",t,r),n.setState({status:null}),console.info("fail to upload image")})}},{key:"copy",value:function(e){var t=this;(0,d.copyText)(e),this.setState({status:"copied"}),setTimeout(function(){t.setState({status:null})},1100)}},{key:"render",value:function(){return null}}]),t}(u.Component);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),d=n(24),p=n(2),h=r(p),m=(u=s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.html,n=e.isLoading;return null===t?null:n?f.default.createElement("div",{style:{textAlign:"center"}},f.default.createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-3x fa-fw","aria-hidden":"true"})):((0,d.proccessLink)((0,h.default)('[id^="post_message"]',t),!0),f.default.createElement("div",{dangerouslySetInnerHTML:{__html:t.html()}}))}}]),t}(c.Component),s.propTypes={html:c.PropTypes.any,isLoading:c.PropTypes.bool},s.defaultProps={html:null},u);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),d=r(f),p=n(2),h=r(p),m=n(26),v=(r(m),n(0)),y=n(7),g=n(8),b=n(13),_=r(b),w=(u=s=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.dispatch=e.dispatch,n.startTrack.call(n),n}return a(t,e),c(t,[{key:"startTrack",value:function(){var e=this;if(/\/showthread\.php/.test(location.href))try{var t=function(){var t=(0,_.default)((0,h.default)(document.body)),n=parseInt(t.getThreadId(),10),r=t.getThreadTitle();if(n===-1)return{v:void 0};var o=parseInt(t.getPage(),10),i=(0,h.default)("table[id^='post']"),a=e;i.bind("inview",d.default.debounce(function(e,t){if(t){var s=(0,h.default)(this),u=parseInt(s.attr("id").match(/(\d+)/)[1],10),l=i.index(s)+1,c={threadId:n,postId:u,postNum:l,page:o,title:r};a.props.dispatch((0,g.updatePostTracker)(c))}},300))}();if("object"===("undefined"==typeof t?"undefined":l(t)))return t.v}catch(e){console.error(e)}}},{key:"render",value:function(){return null}}]),t}(v.Component),s.propTypes={dispatch:v.PropTypes.func},u),k=function(){return{}};t.default=(0,y.connect)(k)(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=n(2),c=r(l),f=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hookBanToUser(),n}return a(t,e),s(t,[{key:"hookBanToUser",value:function(){(0,c.default)(".vbmenu_popup[id^='postmenu_']").each(function(){var e=(0,c.default)(this),t=e.find("a[href*='member.php']").attr("href").match(/\?u=(\d+)/)[1],n=(0,c.default)("<tr> \n        <td class='vbmenu_option vbmenu_option_alink'>\n        <a target='_blank' href='https://vozforums.com/profile.php?do=addlist&userlist=ignore&u="+t+"' \n        title='Mở trong tab mới'><i class=\"fa fa-ban\"/>&nbsp;Add to ban list</a>\n        </td>\n        </tr>");e.find("table tbody").append(n)})}},{key:"render",value:function(){return null}}]),t}(u.Component);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),d=(r(f),n(0)),p=r(d),h=n(7),m=n(3),v=n(8),y=(0,m.autobind)((l=u=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showQuickLink:!1},n}return a(t,e),c(t,[{key:"addQuickLink",value:function(){this.props.dispatch((0,v.addQuickLink)())}},{key:"updateQuickLink",value:function(e,t,n){this.props.dispatch((0,v.updateQuickLink)(t,n,e.target.value))}},{key:"saveQuickLink",value:function(){this.props.dispatch((0,v.saveQuickLink)())}},{key:"removeQuickLink",value:function(e){this.props.dispatch((0,v.removeQuickLink)(e.id))}},{key:"renderAddButton",value:function(){var e=this,t=this.props.quickLinks,n=void 0===t?[]:t;return p.default.createElement("div",{className:"btn-group"},p.default.createElement("div",{className:"btn tooltip-right",onClick:function(){return e.setState({showQuickLink:!e.state.showQuickLink})},"data-tooltip":"Add Quick Link"},p.default.createElement("i",{className:"fa fa-plus"})),n.map(function(e){return p.default.createElement("a",{key:e.id,href:e.link,className:"btn"},e.label)}),function(){return e.state.showQuickLink?[p.default.createElement("div",{key:"voz-mask-quick-link",className:"voz-mask quick-link-mask",onClick:function(){return e.setState({showQuickLink:!e.state.showQuickLink})}}),p.default.createElement("div",{className:"btn-options",key:"quick-link"},p.default.createElement("h3",null,"Quick Links"),p.default.createElement("table",{className:"quick-link-table"},p.default.createElement("thead",null,p.default.createElement("tr",null,p.default.createElement("th",null,"Label"),p.default.createElement("th",null,"Link"),p.default.createElement("th",null,"Action"))),p.default.createElement("tbody",null,n.map(function(t){return p.default.createElement("tr",{key:t.id},p.default.createElement("td",null,p.default.createElement("input",{value:t.label,onChange:function(n){return e.updateQuickLink(n,t.id,"label")}})),p.default.createElement("td",null,p.default.createElement("input",{value:t.link,onChange:function(n){return e.updateQuickLink(n,t.id,"link")}})),p.default.createElement("td",null,p.default.createElement("button",{onClick:function(){return e.removeQuickLink(t)}},"Remove")))}))),p.default.createElement("div",null,p.default.createElement("button",{onClick:e.addQuickLink},"Add"),p.default.createElement("button",{onClick:e.saveQuickLink},"Save")))]:null}())}},{key:"render",value:function(){return p.default.createElement("div",null,this.renderAddButton())}}]),t}(d.Component),u.propTypes={quickLinks:d.PropTypes.array,dispatch:d.PropTypes.func},s=l))||s,g=function(e){var t=e.vozLiving.quickLinks;return{quickLinks:t}};t.default=(0,h.connect)(g)(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l,c,f,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),h=r(p),m=n(0),v=r(m),y=n(4),g=n(2),b=r(g),_=n(10),w=n(82),k=r(w),O=n(3),E=(0,O.autobind)((l=u=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),d(t,[{key:"getQuotes",value:function(){var e=this,t=this.props,n=t.editor,r=t.href;n&&r&&(n.attr("disabled","disabled"),(0,y.GET)(r).then(function(t){n.removeAttr("disabled");var r=h.default.trim((0,b.default)(t).find("#vB_Editor_001_textarea").val()),o=n.prop("selectionStart"),i=n.prop("selectionEnd"),a=n.val(),s=a.substring(0,o),u=a.substring(i,a.length);n.val(s+r+u),n[0].setSelectionRange(o+r.length,o+r.length),n.focus(),e.clearQuotes()}))}},{key:"clearQuotes",value:function(){k.default.set("vbulletin_multiquote","");var e='[src="https://vozforums.com/images/buttons/multiquote_on.gif"]',t="https://vozforums.com/images/buttons/multiquote_off.gif",n='[src="http://vozforums.com/images/buttons/multiquote_on.gif"]',r="http://vozforums.com/images/buttons/multiquote_off.gif";(0,b.default)(e)&&(0,b.default)(e).attr("src",t),(0,b.default)(n)&&(0,b.default)(n).attr("src",r)}},{key:"render",value:function(){return v.default.createElement("div",{className:"voz-living-quick-post-quotation"},v.default.createElement("div",{className:"text"},"Click vào nút ",v.default.createElement("img",{src:"https://vozforums.com/images/buttons/multiquote_off.gif",alt:""})," ở bên dưới-phải của mỗi bài viết để Load Quotes ",v.default.createElement("br",null)),v.default.createElement("div",{className:"control"},v.default.createElement("a",{onClick:this.clearQuotes},"Reset Quotes"),v.default.createElement("a",{onClick:this.getQuotes},"Load Quotes")))}}]),t}(m.Component),u.propTypes={editor:m.PropTypes.any,href:m.PropTypes.string},s=l))||s,P=(f=c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),d(t,[{key:"componentWillReceiveProps",value:function(e){this.addQuickPostQuotation(e)}},{key:"addQuickPostQuotation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.isQuickPostQuotation;if(t){var n=(0,b.default)("#vB_Editor_QR_textarea");if(0===n.length)return;var r=n.parents("#vB_Editor_QR").eq(0),o=(0,b.default)('<div class="voz-living-quick-quote-quotation"></div>'),i=(0,b.default)("a:has(>img[src*='images/buttons/reply.gif'])")[0].href;if(0===r.length)return;r.append(o),(0,_.render)(v.default.createElement(E,{href:i,editor:n}),o[0])}}},{key:"render",value:function(){return null}}]),t}(m.Component),c.propTypes={isQuickPostQuotation:m.PropTypes.bool},f);t.default=P},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),d=n(7),p=n(8),h=(u=s=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showQuoteList:!1},n.dispatch=e.dispatch,n}return a(t,e),l(t,[{key:"getTime",value:function(e){var t=new Date(e);return t.getHours()+":"+t.getMinutes()+" "+t.getDay()+"-"+(t.getMonth()+1)+"-"+t.getFullYear()}},{key:"toggleQuoteList",value:function(){var e=this.state.showQuoteList,t=this.props.countUnseen;e===!1&&0!==t&&(this.dispatch((0,p.markAllQuoteSeen)()),chrome.runtime.sendMessage({continueNotify:!0})),this.setState({showQuoteList:!e})}},{key:"renderQuote",value:function(e){return f.default.createElement("div",{className:"quote-row",key:e.post.id},f.default.createElement("div",{className:"quote-title"},f.default.createElement("a",{href:"showthread.php?p="+e.post.id+"#post"+e.post.id,target:"_blank"},e.thread.title)),f.default.createElement("div",{className:"quote-content"},e.post.content),f.default.createElement("div",{className:"quote-bottom"},"By ",f.default.createElement("a",{className:"quote-item-author",href:"/member.php?u="+e.author.userid,target:"_blank"},"(",e.author.username,")")," @ ",this.getTime(e.post.datetime)))}},{key:"render",value:function(){var e=this,t=this.props.settings.notifyQuote;if(!t)return null;var n=this.props,r=n.quoteList,o=n.countUnseen;return f.default.createElement("div",{className:"btn-group"},f.default.createElement("div",{className:"btn tooltip-right "+(this.state.showQuoteList?"active":""),onClick:function(){return e.toggleQuoteList()},"data-tooltip":"Quote list"},f.default.createElement("i",{className:"fa fa-quote-right"}),f.default.createElement("div",{className:"badge"},o)),function(){return e.state.showQuoteList?[f.default.createElement("div",{key:"voz-mask-quote-list",className:"voz-mask quote-list-mask",onClick:function(){return e.setState({showQuoteList:!e.state.showQuoteList})}}),f.default.createElement("div",{className:"btn-options",key:"quote-list"},f.default.createElement("h3",null,"Quotes"),f.default.createElement("div",{className:"quote-list"},r.map(function(t){return e.renderQuote(t)})))]:null}())}}]),t}(c.Component),s.propTypes={settings:c.PropTypes.object,dispatch:c.PropTypes.func,quoteList:c.PropTypes.array,countUnseen:c.PropTypes.number},s.defaultProps={quoteList:[],settings:{},countUnseen:0},u),m=function(e){var t=e.vozLiving,n=t.quoteList,r=t.settings,o=n.reduce(function(e,t){var n=e;return t.hasSeen===!1&&(n+=1),n},0);return{quoteList:n,settings:r,countUnseen:o}};t.default=(0,d.connect)(m)(h)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),d=r(f),p=n(3),h=n(2),m=r(h),v=n(15),y=r(v),g=n(4),b=n(11),_=n(8),w=(0,p.autobind)((l=u=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),c(t,[{key:"componentDidMount",value:function(){this.bindReloadButton()}},{key:"componentWillReceiveProps",value:function(e){this.bindReloadButton(e)}},{key:"componentWillUnmount",value:function(){y.default.unbind(["command+r","ctrl+r"])}},{key:"bindReloadButton",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=(0,b.getCurrentView)();"thread-list"===n&&t.isReloadButton?y.default.bind(["command+r","ctrl+r"],function(t){t.preventDefault(),e.reloadPage()}):y.default.unbind(["command+r","ctrl+r"])}},{key:"reloadPage",value:function(){var e=this.props.dispatch;window.vozLivingLoader.start(),(0,g.GET)(location.href).then(function(t){var n=(0,m.default)("#threadslist",t),r=(0,m.default)("#threadslist");r.replaceWith(n),e((0,_.getThreadList)()),window.vozLivingLoader.stop()})}},{key:"render",value:function(){var e=this.props.isReloadButton,t=(0,b.getCurrentView)();return"thread-list"===t&&e?d.default.createElement("div",{className:"btn-group"},d.default.createElement("div",{className:"btn tooltip-right",onClick:this.reloadPage,style:{fontSize:"20px"},"data-tooltip":"Fast Refresh"},d.default.createElement("i",{className:"fa fa-refresh"}))):null}}]),t}(f.Component),u.propTypes={dispatch:f.PropTypes.func,isReloadButton:f.PropTypes.bool},s=l))||s;t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),d=n(1),p=r(d),h=n(4),m=n(14),v=(u=s=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loaded:!1,loading:!1,html:""},n}return a(t,e),l(t,[{key:"componentDidMount",value:function(){this.getPost()}},{key:"shouldComponentUpdate",value:function(e,t){return e.postId!==this.props.postId||!p.default.isEqual(t,this.state)}},{key:"getPost",value:function(){var e=this,t="voz_living_post_"+this.props.postId,n=window.localStorage.getItem(t);null!==n?this.loadHtml(n):this.loadPost().then(function(n){e.loadHtml(n),window.localStorage.setItem(t,n)})}},{key:"loadHtml",value:function(e){this.setState({html:{__html:e.replace(/Sent from my.*/,"")},loaded:!0,loading:!1})}},{key:"loadPost",value:function(){return this.setState({loading:!0}),(0,h.GET)("//vozforums.com/showpost.php?p="+this.props.postId).then(function(e){var t=m.load(e);return t.html(".voz-postbit")})}},{key:"render",value:function(){return this.state.loaded&&!this.state.loading?f.default.createElement("div",{dangerouslySetInnerHTML:this.state.html}):this.loading?f.default.createElement("div",null,"Loading post ",this.props.postId):f.default.createElement("div",null)}}]),t}(c.Component),s.propTypes={postId:c.PropTypes.number},u);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){
for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),d=n(7),p=n(1),h=r(p),m=n(8),v=n(46),y=r(v),g=n(25),b=r(g),_=n(11),w=(u=s=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.dispatch=e.dispatch,n.state={showList:!1,showFullInfo:!1},n}return a(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e,t){return!h.default.isEqual(e,this.props)||!h.default.isEqual(t,this.state)}},{key:"openPostInNewTab",value:function(e){return(0,b.default)("/showthread.php?p="+e),!1}},{key:"unsavePost",value:function(e){return this.dispatch((0,m.unsavePost)(e)),!1}},{key:"renderPost",value:function(e){var t=this.openPostInNewTab.bind(this,e),n=this.unsavePost.bind(this,e);return f.default.createElement("div",{className:"bookmark-item-wrapper",key:e},f.default.createElement("div",{className:"bookmark-tools"},f.default.createElement("a",{href:"javscript:void(0)",className:"bookmark-remove",onClick:n},f.default.createElement("i",{className:"fa fa-trash"})),f.default.createElement("a",{href:"javscript:void(0)",className:"open-post-new-tab",onClick:t},f.default.createElement("i",{className:"fa fa-external-link"}))),f.default.createElement(y.default,{postId:e}))}},{key:"render",value:function(){var e=this,t=this.props.savedPosts;return f.default.createElement("div",{className:"btn-group"},f.default.createElement("div",{className:"btn tooltip-right "+(this.state.showList?"active":""),onClick:function(){return e.setState({showList:!e.state.showList})},"data-tooltip":"Bài đánh dấu"},f.default.createElement("i",{className:"fa fa-bookmark"})),function(){return e.state.showList?[f.default.createElement("div",{key:"voz-mask-quote-list",className:"voz-mask quote-list-mask",onClick:function(){return e.setState({showList:!e.state.showList})}}),f.default.createElement("div",{className:(0,_.toClassName)({"btn-options":!0,"bookmark-list":!0,"hide-full-post-info":!e.state.showFullInfo}),key:"quote-list"},f.default.createElement("h3",null,"Bài viết được đánh dấu"),f.default.createElement("div",{className:"show-full-post-option"},f.default.createElement("label",null,"Hiện toàn bộ thông tin",f.default.createElement("input",{type:"checkbox",checked:e.state.showFullInfo,onChange:function(){return e.setState({showFullInfo:!e.state.showFullInfo})}}))),f.default.createElement("div",{className:"quote-list"},Object.keys(t).map(function(n){return e.renderPost(parseInt(n,10),t[n])})))]:null}())}}]),t}(c.Component),s.propTypes={dispatch:c.PropTypes.func,savedPosts:c.PropTypes.object},u),k=function(e){var t=e.vozLiving.savedPosts;return{savedPosts:t}};t.default=(0,d.connect)(k)(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),f=(r(c),n(2)),d=r(f),p=n(26),h=(r(p),n(0)),m=n(7),v=n(8),y=(u=s=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.dispatch=e.dispatch,n.bookmarks=[],n}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;(0,d.default)(".voz-postbit").each(function(t,n){var r=(0,d.default)(n);try{var o=parseInt(r.attr("id").match(/(\d+)/)[1],10),i=(0,d.default)('<a \n          href="#"\n          data-tooltip="Đánh dấu"\n          class="voz-living-post-bookmark tooltip-left">\n            <i class="fa fa-bookmark" />\n          </a>');i.on("click",e.handleClick.bind(e,o)),r.find(".thead").prepend(i),e.bookmarks.push({$bookmark:i,postId:o})}catch(e){return void console.error(e)}}),this.componentWillUpdate(this.props)}},{key:"componentWillUpdate",value:function(e){var t=e.savedPosts;this.bookmarks.forEach(function(e){var n=e.$bookmark,r=e.postId;t[r]?n.hasClass("bookmarked")||(n.addClass("bookmarked"),n.attr("data-tooltip","Bỏ đánh dấu")):n.hasClass("bookmarked")&&(n.removeClass("bookmarked"),n.attr("data-tooltip","Đánh dấu"))})}},{key:"handleClick",value:function(e){return this.props.savedPosts[e]?this.dispatch((0,v.unsavePost)(e)):this.dispatch((0,v.savePost)(e)),!1}},{key:"render",value:function(){return null}}]),t}(h.Component),s.propTypes={dispatch:h.PropTypes.func,savedPosts:h.PropTypes.object},u),g=function(e){var t=e.vozLiving.savedPosts;return{savedPosts:t}};t.default=(0,m.connect)(g)(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"openOptions",value:function(){chrome.runtime.sendMessage({service:"open-options"})}},{key:"render",value:function(){return l.default.createElement("div",{className:"btn-group"},l.default.createElement("div",{className:"btn tooltip-right",onClick:this.openOptions,"data-tooltip":"Options"},l.default.createElement("i",{className:"fa fa-cogs"})))}}]),t}(u.Component);t.default=c},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,l,c,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(0),p=o(d),h=n(1),m=o(h),v=n(3),y=n(7),g=n(11),b=n(16),_=n(8),w=r(_),k=(0,v.autobind)((c=l=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.view=(0,g.getCurrentView)(),n.state={isLoading:!1},n}return s(t,e),f(t,[{key:"subscribe",value:function(){var e=this;this.setState({isLoading:!0}),(0,b.subscribeThread)(this.props.threadId).then(function(){e.props.dispatch(w.subscribeThread(e.props.threadId,e.props.currentPost)),e.setState({isLoading:!1})})}},{key:"unsubscribe",value:function(){var e=this;this.setState({isLoading:!0}),(0,b.unsubscribeThread)(this.props.threadId).then(function(){e.props.dispatch(w.unsubscribeThread(e.props.threadId)),e.setState({isLoading:!1})})}},{key:"render",value:function(){return this.props.isThreadView?p.default.createElement("div",{className:"btn-group"},this.state.isLoading?p.default.createElement("div",{className:"btn tooltip-right",style:{fontSize:"20px"},"data-tooltip":"Processing"},p.default.createElement("i",{className:"fa fa-spinner fa-spin"})):this.props.isSubscribed?p.default.createElement("div",{className:"btn tooltip-right",onClick:this.unsubscribe,style:{fontSize:"20px"},"data-tooltip":"Unsubscribe"},p.default.createElement("i",{className:"fa fa-chain-broken"})):p.default.createElement("div",{className:"btn tooltip-right",onClick:this.subscribe,style:{fontSize:"20px"},"data-tooltip":"Subscribe"},p.default.createElement("i",{className:"fa fa-check-square-o"}))):null}}]),t}(d.Component),l.propTypes={dispatch:d.PropTypes.func,isSubscribed:d.PropTypes.bool,isThreadView:d.PropTypes.bool,threadId:d.PropTypes.any,currentPost:d.PropTypes.object},u=c))||u,O=function(e){var t=e.vozLiving,n="thread"===t.misc.currentView;return{currentPost:t.currentPost,isThreadView:n,isSubscribed:!!n&&!m.default.isUndefined(t.followThreads[t.misc.threadId]),threadId:n?t.misc.threadId:null}};t.default=(0,y.connect)(O)(k)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=n(2),d=r(f),p=n(15),h=r(p),m=n(1),v=r(m),y=(u=s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.currentView;"thread"===e&&((0,d.default)(".pagenav > table > tbody > tr").prepend('<td class="voz-living-arrow-nav-help">\n        Dùng phím mũi tên <- và -> để chuyển trang\n        </td>'),h.default.bind("right",function(){var e=(0,d.default)('a[rel="next"]');if(e){var t=e.eq(0).attr("href");v.default.isUndefined(t)||(window.location.href=t)}}),h.default.bind("left",function(){var e=(0,d.default)('a[rel="prev"]');if(e){var t=e.eq(0).attr("href");v.default.isUndefined(t)||(window.location.href=t)}}))}},{key:"componentWillUnmount",value:function(){h.default.unbind(["left","right"])}},{key:"render",value:function(){return null}}]),t}(c.Component),s.propTypes={currentView:c.PropTypes.string},u);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),d=n(7),p=n(10),h=n(2),m=r(h),v=n(1),y=r(v),g=n(53),b=r(g),_=n(15),w=r(_),k=n(25),O=r(k),E=n(22),P=(u=s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"componentDidMount",value:function(){(0,m.default)(".pagenav > table > tbody > tr").prepend('<td class="voz-living-arrow-nav-help">\n      Dùng phím mũi tên <- và -> để chuyển trang khi xem trước thớt đóng\n      </td>'),w.default.bind("left",function(){if(window.vozLivingCurrentThreadPreview)window.vozLivingCurrentThreadPreview.prevPost();else{var e=(0,m.default)('a[rel="prev"]');if(e){var t=e.eq(0).attr("href");y.default.isUndefined(t)||(window.location.href=t)}}}),w.default.bind("right",function(){if(window.vozLivingCurrentThreadPreview)window.vozLivingCurrentThreadPreview.nextPost();else{var e=(0,m.default)('a[rel="next"]');if(e){var t=e.eq(0).attr("href");y.default.isUndefined(t)||(window.location.href=t)}}})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.threadList,r=e.isThreadPreview;n.length>0&&r&&n.forEach(function(e){t.mountThreadPreviewControl(e),t.mountOpenNewTabControl(e)})}},{key:"componentWillUnmount",value:function(){w.default.unbind(["left","right"])}},{key:"mountThreadPreviewControl",value:function(e){var t=e.id,n=e.pageNum,r=e.element,o=document.createElement("div");o.id="thread-preview-"+t,o.className="thread-preview-wrapper",r.append(o),(0,p.render)(f.default.createElement(d.Provider,{store:E.store},f.default.createElement(b.default,{id:t,pageNum:n,element:r})),o)}},{key:"mountOpenNewTabControl",value:function(e){var t=e.id,n=e.element,r=n.find("a[id=thread_title_"+t+"]");this.props.autoGotoNewthread===!0&&(r[0].href=r[0].href.replace(/php\?/,"php?goto=newpost&"));var o=r[0].href,i=(0,m.default)('<a \n      class="voz-living-newtab tooltip-bottom" \n      href="'+o+'"\n      data-tooltip="Mở tab mới"\n      target="_blank">\n        &nbsp;&nbsp;&nbsp;<i class="fa fa-external-link"/>&nbsp;&nbsp;&nbsp;\n      </a>');r.after(i),i.on("click",function(){return(0,O.default)(o)})}},{key:"render",value:function(){return null}}]),t}(c.Component),s.propTypes={threadList:c.PropTypes.array,dispatch:c.PropTypes.func,isThreadPreview:c.PropTypes.bool,autoGotoNewthread:c.PropTypes.bool},u),T=function(e){var t=e.vozLiving.threadList;return{threadList:t}};t.default=(0,d.connect)(T)(P)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,l,c,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(0),p=o(d),h=n(4),m=n(2),v=o(m),y=n(1),g=o(y),b=n(3),_=n(15),w=o(_),k=n(39),O=o(k),E=n(16),P=n(7),T=n(8),x=r(T),S=(0,b.autobind)((c=l=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={content:"",show:!1,currentPostIndex:null,currentPageIndex:null,currentHTMLViewPosts:[],isLoading:!1},n}return s(t,e),f(t,[{key:"componentDidMount",value:function(){this.url=this.getPageUrl()}},{key:"getPageUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"https://vozforums.com/showthread.php?t="+this.props.id+"&page="+e}},{key:"getPageByIndex",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.currentPageIndex;return new Promise(function(n){var r=e.props.pageNum;if(t<r){var o=e.getPageUrl(t+1);(0,h.GET)(o).then(function(e){n(e)})}else n(null)})}},{key:"showPost",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments[1],r=this.state,o=r.currentPageIndex,i=r.currentHTMLViewPosts,a=r.show;a?this.setState({isLoading:!0}):this.setState({show:!0,isLoading:!0}),g.default.isUndefined(n)||g.default.isNull(n)||n===o?this.setState({currentPostIndex:t,content:i.eq(t),isLoading:!1}):this.loadPosts(n).then(function(r){var o="last"===t?r.length-1:t;e.setState({currentHTMLViewPosts:r,currentPostIndex:o,content:r.eq(o),isLoading:!1,currentPageIndex:n})})}},{key:"viewLastPost",value:function(){var e=this.props.pageNum,t=this.state,n=t.currentPageIndex,r=t.currentHTMLViewPosts;n!==e-1?this.showPost("last",e-1):this.showPost(r.length-1,n)}},{key:"viewFirstPost",value:function(){var e=this.state,t=e.currentPageIndex,n=e.currentHTMLViewPosts;0!==t||0===n.length?this.showPost(0,0):this.showPost(0,t)}},{key:"loadPosts",value:function(e){var t=this;return new Promise(function(n){t.getPageByIndex(e).then(function(e){null===e&&n([]);var t=(0,v.default)(e).find("table.voz-postbit");n(t)})})}},{key:"openNewTab",value:function(){window.open(this.url,"_blank")}},{key:"closeThreadPreview",value:function(){w.default.unbind("esc"),this.setState({show:!1}),window.vozLivingCurrentThreadPreview=null}},{key:"openThreadPreview",value:function(){var e=this,t=this.state.currentHTMLViewPosts;(0,v.default)(".btn-view.active").click(),w.default.bind("esc",function(){e.closeThreadPreview()}),0===t.length?this.viewFirstPost():this.setState({show:!0}),window.vozLivingCurrentThreadPreview=this}},{key:"toggleThreadPreview",value:function(){var e=this.state,t=e.show,n=e.isLoading;n||(t?this.closeThreadPreview():this.openThreadPreview())}},{key:"prevPost",value:function(){var e=this.state,t=e.currentPostIndex,n=e.currentPageIndex;0===t?0!==n&&this.showPost("last",n-1):t>0&&this.showPost(t-1,n)}},{key:"nextPost",value:function(){var e=this.state,t=e.currentPostIndex,n=e.currentPageIndex,r=e.currentHTMLViewPosts,o=this.props.pageNum;t===r.length-1?n<o-1&&this.showPost(0,n+1):t<r.length-1&&this.showPost(t+1,n)}},{key:"toggleSubscribeThread",value:function(){var e=this.state,t=e.currentPostIndex,n=e.currentPageIndex,r=e.content,o=this.props,i=o.followThreads,a=o.id,s=o.dispatch,u=o.element;i[a]?(0,E.unsubscribeThread)(a).then(function(){s(x.unsubscribeThread(a))}):!function(){var e=(0,v.default)('a[id^="thread_title"]',u).text(),o=r?(0,v.default)(r).attr("id").replace("post",""):"",i={threadId:a,postId:o,postNum:10*n+t+1,page:n+1,title:e};(0,E.subscribeThread)(a).then(function(){s(x.subscribeThread(a,i))})}()}},{key:"renderThreadContent",value:function(){var e=this.state,t=e.show,n=e.isLoading,r=e.content,o=e.currentPostIndex,i=e.currentPageIndex,a=this.props,s=a.followThreads,u=a.id,l=!!s[u];if(!t)return null;var c="Sử dụng phím mũi tên <- -> để chuyển post. Phím Esc để đóng khung preview.";return p.default.createElement("div",{className:"preview-wrapper"},p.default.createElement("div",{className:"left-preview pull-left",style:{width:"calc(100% - 45px)"}},p.default.createElement("div",{className:"preview-control"},c,p.default.createElement("div",{className:"btn pull-right btn-next-post tooltip-top",onClick:this.nextPost,"data-tooltip":"Xem post sau"},p.default.createElement("i",{className:"fa fa-arrow-right"})),p.default.createElement("div",{className:"btn pull-right btn-prev-post tooltip-top",onClick:this.prevPost,"data-tooltip":"Xem post trước"},p.default.createElement("i",{className:"fa fa-arrow-left"})),p.default.createElement("div",{className:"pull-right"},"Post hiện tại: ",10*i+o+1)),p.default.createElement("div",{className:"preview-content"},p.default.createElement(O.default,{html:r,isLoading:n}))),p.default.createElement("div",{className:"right-preview pull-right"},p.default.createElement("div",{className:"btn",onClick:this.openNewTab,"data-tooltip":"Mở tab mới"},p.default.createElement("i",{className:"fa fa-share"})),p.default.createElement("div",{className:"btn",onClick:this.viewFirstPost,"data-tooltip":"Xem post đầu tiên"},p.default.createElement("i",{className:"fa fa-fast-backward"})),p.default.createElement("div",{className:"btn",onClick:this.viewLastPost,"data-tooltip":"Xem post cuối cùng"},p.default.createElement("i",{className:"fa fa-fast-forward"})),p.default.createElement("div",{className:"btn",onClick:this.toggleSubscribeThread,"data-tooltip":"Theo dõi thớt"},l?p.default.createElement("i",{className:"fa fa-chain-broken"}):p.default.createElement("i",{className:"fa fa-check-square-o"}))))}},{key:"render",value:function(){var e=this,t=this.state.show,n=p.default.createElement("i",{className:"fa fa-angle-double-down"}),r="btn btn-view";return t&&(n=p.default.createElement("i",{className:"fa fa-angle-double-up"}),r+=" active"),p.default.createElement("div",{className:"thread-preview-inner"},p.default.createElement("div",{className:r,onClick:function(){return e.toggleThreadPreview()},"data-tooltip":"Thread preview"},n),this.renderThreadContent())}}]),t}(d.Component),l.propTypes={id:d.PropTypes.string,pageNum:d.PropTypes.number,element:d.PropTypes.any,followThreads:d.PropTypes.object,dispatch:d.PropTypes.func},u=c))||u,I=function(e){var t=e.vozLiving.followThreads;return{followThreads:t}};t.default=(0,P.connect)(I)(S)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a,s,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=n(4),d=(s=a=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e){return e.userStyle!==this.props.userStyle}},{key:"componentWillUpdate",value:function(e){var t=e.userStyle;this.checkAddStyle(t)}},{key:"checkAddStyle",value:function(e){var t=this;try{var n=function(){if(""===e)return{v:void 0};var n=e.match(/\/styles\/(\d+)\//)[1],r="voz_living_userstyle_"+n,o=window.localStorage.getItem(r);null!==o&&t.addStyle(o),(0,f.GET)("https://userstyles.org/styles/"+n+".css",{credentials:"same-origin"}).then(function(e){null===o?(t.addStyle(e),window.localStorage.setItem(r,e)):e!==o&&(window.localStorage.setItem(r,e),console.log("style updated"))})}();if("object"===("undefined"==typeof n?"undefined":u(n)))return n.v}catch(e){console.error(e)}}},{key:"addStyle",value:function(e){try{var t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode(e.replace(/@-moz-document.*{/g,"@media all {"))),document.getElementsByTagName("head")[0].appendChild(t)}catch(e){console.error(e)}}},{key:"render",value:function(){return null}}]),t}(c.Component),a.propTypes={userStyle:c.PropTypes.string},s);t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=n(2),d=r(f),p=(u=s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){this.triggerWideScreen(e)}},{key:"triggerWideScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.isWideScreen;t&&(0,d.default)(".page").css({width:"100%",maxWidth:"5000px"})}},{key:"render",value:function(){return null}}]),t}(c.Component),s.propTypes={isWideScreen:c.PropTypes.bool},u);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u,l,c,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(0),p=r(d),h=n(3),m=n(11),v=n(1),y=r(v),g=n(59),b=r(g),_=n(19),w=r(_),k="voz_living_peerchat",O="voz_living_peerchat_isconnect",E=(0,h.autobind)((c=l=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r="true"===n.sessionStorageGet(O);return n.state={messages:n.sessionStorageGet(k)||[],sendMessage:"",isConnect:r,isOpen:r,isMaximized:!1,isShowEmotionBox:!1},n.inputSendMessage=null,n.throttledMessagesUpdate=y.default.throttle(n.updateMessageToStorage.bind(n),300),n.addIncomeMessageListener(),n}return s(t,e),f(t,[{key:"sessionStorageSet",value:function(e,t){window.sessionStorage.setItem(e,JSON.stringify(t))}},{key:"sessionStorageGet",value:function(e){var t=window.sessionStorage.getItem(e);return JSON.parse(t)}},{key:"addIncomeMessageListener",value:function(){var e=this;chrome.runtime.onMessage.addListener(function(t){var n=t.peerChatIncomeMessage;n&&(e.setState({messages:[].concat(o(e.state.messages),[n])}),e.throttledMessagesUpdate())})}},{key:"updateMessageToStorage",value:function(){var e=this;setTimeout(function(){return e.sessionStorageSet(k,e.state.messages)},100)}},{key:"clearMessageStorage",value:function(){this.sessionStorageSet(k,[])}},{key:"connect",value:function(){this.setState({isConnect:!0}),this.sessionStorageSet(O,"true"),chrome.runtime.sendMessage({peerChatConnect:!0})}},{key:"disconnect",value:function(){this.setState({isConnect:!1,messages:[],sendMessage:"",isOpen:!1,isShowEmotionBox:!1}),this.sessionStorageSet(O,"false"),chrome.runtime.sendMessage({peerChatDisconnect:!0}),this.clearMessageStorage()}},{key:"send",value:function(){var e=this.state,t=e.sendMessage,n=e.messages,r=this.props.maxMessageNumber,i=t.trim();if(i.length>250)return void window.alert("Tin nhắn của bạn không được dài quá 250 ký tự.");if(""!==i){var a={name:this.props.authInfo.username,timeStamp:(new Date).getTime(),message:t},s=y.default.cloneDeep(n);n.length>=r&&s.shift(),chrome.runtime.sendMessage({peerChatSendMessage:a},this.setState({sendMessage:"",messages:[].concat(o(s),[a]),isShowEmotionBox:!1})),this.throttledMessagesUpdate()}}},{key:"handleChange",value:function(e){var t=e.target.value,n=t.length-1;t[n]&&":"===t[n]?this.setState({sendMessage:t,isShowEmotionBox:!0}):(" "===t[n]&&this.state.isShowEmotionBox&&this.setState({isShowEmotionBox:!1}),this.setState({sendMessage:t}))}},{key:"handleKeyUp",value:function(e){13===e.keyCode&&this.send()}},{key:"toggleOpen",value:function(){var e=this.state.isOpen;e||(e&&this.disconnect(),this.setState({isOpen:!e}))}},{key:"toggleEmotionBox",value:function(){this.setState({isShowEmotionBox:!this.state.isShowEmotionBox})}},{key:"appendInput",value:function(e){var t=this.state.sendMessage,n=t.length-1;" "!==t[n]?(":"===t[n]&&(t=t.substring(0,n-1)),this.setState({sendMessage:t+" "+e.text+" ",isShowEmotionBox:!1})):this.setState({sendMessage:""+(t||"")+e.text+" ",isShowEmotionBox:!1}),this.inputSendMessage&&this.inputSendMessage.focus()}},{key:"renderChatBody",value:function(){var e=this,t=this.state,n=t.isConnect,r=t.sendMessage,o=t.messages,i=t.isShowEmotionBox;return n?p.default.createElement("div",{className:"voz-living-peer-chat-body"},p.default.createElement(b.default,{messages:o}),i?p.default.createElement(w.default,{onIconClick:this.appendInput}):null,p.default.createElement("div",{className:"voz-living-peer-chat-input"},p.default.createElement("input",{type:"text",value:r,onChange:this.handleChange,onKeyUp:this.handleKeyUp,ref:function(t){e.inputSendMessage=t}}),p.default.createElement("button",{onClick:this.toggleEmotionBox},"Emo"),p.default.createElement("button",{onClick:this.send},"Send"))):p.default.createElement("div",{className:"voz-living-peer-chat-body"},p.default.createElement("div",{className:"voz-living-peer-chat-connect",onClick:function(){return e.connect()}}," VOZLiving ",p.default.createElement("br",null),"Peer Chat - Beta ",p.default.createElement("br",null),p.default.createElement("i",{className:"fa fa-connectdevelop fa-3"})," ",p.default.createElement("br",null),p.default.createElement("small",null,"Click để chat với Vozer khác!!!"),p.default.createElement("div",{className:"voz-living-chat-description"},"* Chat P2(M)P bằng phương thức WebRTC, nội dung chat không thông qua bất kì server nào mà tới thẳng người nhận",p.default.createElement("br",null),"* Id của người chat được tự động lấy theo tên đăng nhập voz, có thể bị can thiệp. Đề phòng giả id")))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isOpen,r=t.isConnect,o=t.isMaximized;return p.default.createElement("div",{className:(0,m.toClassName)({"voz-living-peer-chat-wrapper":!0,open:n,"vlpc-maximized":o})},p.default.createElement("div",{className:"voz-living-peer-chat"},p.default.createElement("div",{
className:"voz-living-peer-chat-header",onClick:function(){return e.toggleOpen()}},"VOZLiving Peer Chat (Beta)  ",r?p.default.createElement("a",{href:"javascript:void(0)","data-tooltip":"Disconnect",className:"voz-living-peerchat-off",onClick:function(){return e.disconnect()}},p.default.createElement("i",{className:"fa fa-power-off"})):null," ",n?p.default.createElement("a",{href:"javascript:void(0)","data-tooltip":"Maximize Toggle",className:"voz-living-peerchat-max",onClick:function(){return e.setState({isMaximized:!e.state.isMaximized})}},p.default.createElement("i",{className:"fa fa-desktop"})):null),this.renderChatBody()))}}]),t}(d.Component),l.propTypes={authInfo:d.PropTypes.object,maxMessageNumber:d.PropTypes.number},u=c))||u;e.exports=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),d=n(10),p=n(11),h=n(56),m=r(h),v=(u=s=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"componentDidMount",value:function(){this.addPeerChat(this.props)}},{key:"addPeerChat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.isPeerChat,n=(0,p.getAuthenticationInformation)();if(t){var r=document.createElement("div");r.id="voz-living-peer-chat-root",document.body.appendChild(r),(0,d.render)(f.default.createElement(m.default,{authInfo:n,maxMessageNumber:100}),r)}}},{key:"render",value:function(){return null}}]),t}(c.Component),s.propTypes={isPeerChat:c.PropTypes.bool},s.defaultProps={isPeerChat:!0},u);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=new Date(e),n=[t.getHours(),t.getMinutes(),t.getDate(),t.getMonth()+1].map(function(e){return _.default.padStart(""+e,2,"0")}),r=m(n,4),o=r[0],i=r[1],a=r[2],s=r[3];return a+"-"+s+"-"+t.getFullYear()+" "+o+":"+i}function u(e){var t=e;return t.indexOf("http")>-1?"":("/"!==t.charAt(0)&&(t="/"+t),"https://vozforums.com"+t)}function l(e,t){var n=e;return t&&t.length>0?(t.forEach(function(e){n=n.replace(e,"_vozVOZLivingvoz_")}),n=n.split("_vozVOZLivingvoz_")):[e]}var c,f,d,p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=n(0),y=r(v),g=n(3),b=n(1),_=r(b),w=n(21),k=r(w),O=(0,g.autobind)((d=f=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.emoRegex=new RegExp(/[^\w]\^?[:;-][a-zA-Z_]*[\+)("\*-]?[0-9]?s?\)?\(?>?:?\^?/,"g"),n.linkRegex=new RegExp(/(http[s]?:\/)?\/?([^:\/\s]+)((\/\w+)*\/)([\w\-\.]+[^#?\s]+)(.*)?(#[\w\-]+)?/,"gi"),n}return a(t,e),h(t,[{key:"getColor",value:function(e){if(e){var t=e.toLowerCase().replace(/\W+/g,""),n=t.split("").map(function(e){return Math.abs(~~(3*(e.charCodeAt(0)-48)))}).slice(0,3);return"rgb("+n[0]+", "+n[1]+", "+n[2]+")"}return"rgb(0, 0, 0)"}},{key:"prepareTextLink",value:function(e){var t=this;if("string"==typeof e){var n=function(){var n=e.match(t.linkRegex),r=l(e,n);if(r&&r.length>0&&n&&n.length>0)return{v:y.default.createElement("div",null,r.map(function(e,t){return n[t]?y.default.createElement("span",{key:"link-"+e+"-"+t},e,y.default.createElement("a",{href:n[t],target:"_blank"},n[t])):y.default.createElement("span",{key:"link-"+e+"-"+t},e)}))}}();if("object"===("undefined"==typeof n?"undefined":p(n)))return n.v}return e}},{key:"prepareMessage",value:function(e,t,n){var r=this,o=e,i=t+"-"+n;return o&&o.length>0&&!function(){var e=o.split(r.emoRegex),t=o.match(r.emoRegex);e&&e.length>0&&(o=y.default.createElement("div",null,e.map(function(e,n){if(!t||!t[n])return y.default.createElement("span",{key:"message-"+n+"-"+i},r.prepareTextLink(e));var o=k.default.find(function(e){return e.text===t[n].trim()});return o?y.default.createElement("span",{key:"message-"+n+"-"+i},r.prepareTextLink(e)," ",y.default.createElement("img",{src:u(o.src),alt:o.text})):y.default.createElement("span",{key:"message-"+n+"-"+i},r.prepareTextLink(e)||"",t[n]||"")})))}(),o}},{key:"render",value:function(){var e=this.props,t=e.text,n=e.timestamp,r=e.username,o=this.prepareMessage(t);return y.default.createElement("div",{key:r+"-"+n,style:{borderColor:this.getColor(r)}},y.default.createElement("span",{className:"voz-living-chat-time"},s(n)),y.default.createElement("span",{className:"voz-living-chat-name"},r,": "),y.default.createElement("div",{className:"voz-living-chat-message"},o))}}]),t}(v.Component),f.propTypes={text:v.PropTypes.string,timestamp:v.PropTypes.oneOfType([v.PropTypes.number,v.PropTypes.string]),username:v.PropTypes.string},f.defaultProps={text:"",username:"",timestamp:""},c=d))||c;e.exports=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,u,l,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),d=r(f),p=n(10),h=r(p),m=n(3),v=n(1),y=r(v),g=n(58),b=r(g),_=(0,m.autobind)((l=u=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.activeScrollTop=!0,n}return a(t,e),c(t,[{key:"componentDidMount",value:function(){var e=h.default.findDOMNode(this);e.addEventListener("scroll",this.onScroll)}},{key:"shouldComponentUpdate",value:function(e){return!y.default.isEqual(e.messages,this.props.messages)}},{key:"componentDidUpdate",value:function(){this.updateScrollToBottom()}},{key:"componentWillUnmount",value:function(){var e=h.default.findDOMNode(this);e.removeEventListener("scroll",this.onScroll)}},{key:"onScroll",value:function(){var e=h.default.findDOMNode(this),t=e.scrollHeight-e.offsetHeight;e.scrollTop>=t?this.activeScrollTop=!0:this.activeScrollTop=!1}},{key:"updateScrollToBottom",value:function(){if(this.activeScrollTop){var e=h.default.findDOMNode(this);if(e.scrollHeight>e.offsetHeight){var t=e.scrollHeight-e.offsetHeight;e.scrollTop=t}}}},{key:"render",value:function(){var e=this.props.messages;return d.default.createElement("div",{className:"voz-living-message-list"},d.default.createElement("ul",null,e.map(function(e){return d.default.createElement("li",{key:e.name+"-"+e.timeStamp},d.default.createElement(b.default,{text:e.message,timestamp:e.timeStamp,username:e.name}))})))}}]),t}(f.Component),u.propTypes={messages:f.PropTypes.array},u.defaultProps={messages:[]},s=l))||s;e.exports=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(0),p=r(d),h=n(7),m=n(2),v=r(m),y=n(1),g=r(y),b=n(31),_=r(b),w=n(55),k=r(w),O=n(52),E=r(O),P=n(35),T=r(P),x=n(51),S=r(x),I=n(33),L=r(I),j=n(36),C=r(j),N=n(43),M=r(N),V=n(40),z=r(V),q=n(41),R=r(q),U=n(38),Q=r(U),A=n(54),D=r(A),G=n(48),H=r(G),B=n(32),Z=r(B),K=n(61),W=r(K),F=n(57),Y=r(F),X=n(8),$=n(9),J=n(11),ee=n(13),te=r(ee),ne=(u=s=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));switch(n.dispatch=e.dispatch,n.currentView=(0,J.getCurrentView)(),n.authInfo=(0,J.getAuthenticationInformation)(),n.currentView){case"thread":var r=(0,te.default)((0,v.default)(document.body));trackEvent("view-thread-id",r.getThreadId()),trackEvent("view-thread-title",r.getThreadTitle());break;case"thread-list":try{var a=window.location.href.match(/f=(\d+)/)[1];trackEvent("view-forum",a)}catch(e){console.error(e)}}return n}return a(t,e),f(t,[{key:"componentDidMount",value:function(){var e=this,t=(0,te.default)((0,v.default)(document.body));setTimeout(function(){document.querySelector(".voz-living-side-menu").classList.remove("trans-start")},1e3),Promise.all([(0,$.getChromeLocalStore)(["settings","quotes","authInfo","quickLinks","followThreads","threadTracker"]),(0,$.getChromeSyncStore)(["savedPosts"])]).then(function(n){var r=c(n,2),o=r[0],i=r[1],a=o.settings,s=o.authInfo,u=l({},$.defaultStoreStructure.settings,a),f={};f.currentView=e.currentView,"thread"===f.currentView&&(f.threadId=t.getThreadId()),o.settings=u,e.props.dispatch((0,X.init)(l({},o,i,{misc:f}))),u.threadPreview===!0&&"thread-list"===e.currentView&&e.props.dispatch((0,X.getThreadList)()),!g.default.isEmpty(s)&&g.default.isEqual(s,e.authInfo)||(0,$.setChromeLocalStore)({authInfo:e.authInfo})}),chrome.runtime.onMessage.addListener(function(t){t.quotes&&e.dispatch((0,X.updateQuotes)(t.quotes))}),window.vozLivingLoader.stop()}},{key:"renderBaseOnCurrentView",value:function(e){var t=g.default.isEmpty(this.props.settings)?{}:l({},$.defaultStoreStructure.settings,this.props.settings),n=t.linkHelper,r=t.minimizeQuote,o=t.quickPostQuotation,i=t.threadPreview,a=t.savePostEnable,s=t.capturePostEnable;return"thread-list"===e?[p.default.createElement(E.default,{key:"voz-living-thread-list-control",dispatch:this.dispatch,currentView:this.currentView,isThreadPreview:i,autoGotoNewthread:this.props.settings.autoGotoNewthread})]:"thread"===e?[p.default.createElement(T.default,{linkHelper:n,key:"voz-living-link-helper"}),p.default.createElement(S.default,{currentView:this.currentView,key:"voz-living-thread-control"}),p.default.createElement(C.default,{isMinimizeQuote:r,key:"voz-living-minimize-quote-control"}),p.default.createElement(M.default,{isQuickPostQuotation:o,key:"voz-living-quick-post-control"}),p.default.createElement(R.default,{key:"voz-living-quick-ban-user"}),a?p.default.createElement(H.default,{dispatch:this.dispatch,key:"saved-post-thread-binder"}):null,s?p.default.createElement(Z.default,{key:"capture-post"}):null]:null}},{key:"render",value:function(){var e=this.props.settings,t=e.wideScreen,n=e.adsRemove,r=e.emotionHelper,o=e.autoHideSidebar,i=e.peerChatEnable,a=e.userStyle;return p.default.createElement("div",{id:"voz-living"},p.default.createElement(_.default,{isRemoveAds:n}),p.default.createElement(k.default,{isWideScreen:t}),p.default.createElement(z.default,{dispatch:this.dispatch}),p.default.createElement(L.default,{currentView:this.currentView,emotionHelper:r}),p.default.createElement(W.default,{dispatch:this.dispatch,settings:this.props.settings,autoHide:o}),this.renderBaseOnCurrentView(this.currentView),p.default.createElement(Q.default,null),this.authInfo.isLogin&&i?p.default.createElement(Y.default,null):null,p.default.createElement(D.default,{userStyle:a}))}}]),t}(d.Component),s.propTypes={settings:d.PropTypes.object,dispatch:d.PropTypes.func},s.defaultProps={settings:{}},u),re=function(e){var t=e.vozLiving.settings;return{settings:t}};t.default=(0,h.connect)(re)(ne)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),d=n(7),p=n(49),h=r(p),m=n(45),v=r(m),y=n(44),g=r(y),b=n(42),_=r(b),w=n(34),k=r(w),O=n(50),E=r(O),P=n(47),T=r(P),x=n(11),S=function(){return f.default.createElement("div",{className:"btn-group"},f.default.createElement("a",{className:"btn tooltip-right",href:"https://voz-living.github.io/voz-living-feedback/",style:{fontSize:"20px"},target:"_blank","data-tooltip":"Góp ý/Báo lỗi/Tâm sự"},f.default.createElement("i",{className:"fa fa-envelope-o"})))},I=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOpen:!1},n}return a(t,e),l(t,[{key:"render",value:function(){var e=this,t=this.state.isOpen;return f.default.createElement("div",{className:"btn-group"},f.default.createElement("a",{className:"btn tooltip-right"+(t?" active":""),href:"javascript:void(0)",style:{fontSize:"20px"},target:"_blank","data-tooltip":"Linh Xinh",onClick:function(){return e.setState({isOpen:!e.state.isOpen})}},"LX"),f.default.createElement("div",{key:"voz-mask-quote-list",style:{display:t?"block":"none"},className:"voz-mask quote-list-mask",onClick:function(){return e.setState({isOpen:!e.state.isOpen})}}),f.default.createElement("div",{className:"btn-options",style:{display:t?"block":"none",padding:0}},f.default.createElement("iframe",{src:"https://voz-living.github.io/linhxinh/?extension=true",style:{width:"100%",height:"100%"}})))}}]),t}(c.Component),L=(u=s=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.dispatch=e.dispatch,n}return a(t,e),l(t,[{key:"componentWillUpdate",value:function(e){var t=[document.querySelectorAll("body>div:not(#voz-living-app):not(#voz-living-loader-wrapper)"),document.querySelectorAll("body else>div:not(#voz-living-app)"),document.querySelectorAll("body>form")];t.forEach(function(t){t&&t.length>0&&t.forEach(function(t){t&&e.autoHide===!0&&(t.style.marginLeft="0px"),t&&e.autoHide===!1&&(t.style.marginLeft="50px")})})}},{key:"render",value:function(){var e=this.props,t=e.settings,n=e.autoHide;return f.default.createElement("div",{className:(0,x.toClassName)({"voz-living-side-menu":!0,"trans-start":!0,"auto-hide":n})},f.default.createElement(h.default,{settings:t,dispatch:this.dispatch}),f.default.createElement(g.default,{dispatch:this.dispatch}),f.default.createElement(k.default,{dispatch:this.dispatch}),t.savePostEnable===!0?f.default.createElement(T.default,{dispatch:this.dispatch}):null,f.default.createElement(v.default,{dispatch:this.dispatch,isReloadButton:t.reloadButton}),f.default.createElement(I,null),f.default.createElement(_.default,{dispatch:this.dispatch}),f.default.createElement("div",{className:"voz-living-size-menu__bottom"},f.default.createElement(S,null),f.default.createElement(E.default,{dispatch:this.dispatch})))}}]),t}(c.Component),s.propTypes={settings:c.PropTypes.object,dispatch:c.PropTypes.func,autoHide:c.PropTypes.bool},s.defaultProps={settings:{}},u),j=function(e){var t=e.vozLiving.settings;return{settings:t}};t.default=(0,d.connect)(j)(L)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(27),i=n(63),a=r(i);t.default=(0,o.combineReducers)({vozLiving:a.default})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments[1],n=h[t.type];return n?n(e,t):e}Object.defineProperty(t,"__esModule",{value:!0});var a,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i;var u=n(1),l=r(u),c=n(9),f=n(20),d={settings:{},threadList:[],quoteList:[],misc:{}},p=200,h=(a={},o(a,f.VOZ_LIVING_INIT,function(e,t){var n=l.default.cloneDeep(t);return delete n.type,n.quoteList=t.quotes,delete n.quotes,s({},e,n)}),o(a,f.VOZ_LIVING_GET_THREAD_LIST,function(e,t){var n=t.threadList;return s({},e,{threadList:n})}),o(a,f.VOZ_LIVING_UDATE_QUOTE_LIST,function(e,t){var n=t.quotes;return s({},e,{quoteList:n})}),o(a,f.VOZ_LIVING_CHANGE_OPTION,function(e,t){var n=e.settings,r=t.option,i=t.value,a=i||!n[r],u=s({},n,o({},r,a));return(0,c.setChromeLocalStore)({settings:u}),s({},e,{settings:u})}),o(a,f.VOZ_LIVING_SEEN_ALL_QUOTE,function(e){var t=e.quoteList,n=l.default.cloneDeep(t);return n.forEach(function(e){var t=e;t.hasSeen=!0}),(0,c.setChromeLocalStore)({quotes:n}),s({},e,{quoteList:n})}),o(a,f.VOZ_LIVING_ADD_QUICK_LINK,function(e){var t=e.quickLinks,n=l.default.cloneDeep(t);return n.push({id:(new Date).getTime(),label:"",link:""}),s({},e,{quickLinks:n})}),o(a,f.VOZ_LIVING_UPDATE_QUICK_LINK,function(e,t){var n=t.id,r=t.key,o=t.value,i=e.quickLinks,a=l.default.cloneDeep(i),u=l.default.find(a,{id:n});return u&&(u[r]=o),s({},e,{quickLinks:a})}),o(a,f.VOZ_LIVING_SAVE_QUICK_LINK,function(e){var t=e.quickLinks;return(0,c.setChromeLocalStore)({quickLinks:t}),s({},e)}),o(a,f.VOZ_LIVING_REMOVE_QUICK_LINK,function(e,t){var n=t.id,r=e.quickLinks,o=l.default.cloneDeep(r);return l.default.remove(o,{id:n}),(0,c.setChromeLocalStore)({quickLinks:o}),s({},e,{quickLinks:o})}),o(a,f.VOZ_LIVING_THREAD_SUBSCRIBE,function(e,t){var n=t.threadId,r=t.post,o=l.default.cloneDeep(e.followThreads);return o[n]=r,(0,c.setChromeLocalStore)({followThreads:o}),s({},e,{followThreads:o})}),o(a,f.VOZ_LIVING_THREAD_UNSUBSCRIBE,function(e,t){var n=t.threadId,r=l.default.cloneDeep(e.followThreads);return delete r[n],(0,c.setChromeLocalStore)({followThreads:r}),s({},e,{followThreads:r})}),o(a,f.VOZ_LIVING_SAVE_POST,function(e,t){var n=t.postId,r=e.savedPosts;if(Object.keys(r).length>=p){alert("Đã quá giới hạn ("+p+" bài) số lượng bài có thể lưu, xin hãy xoá bớt ");var i=new Error("Saved post reach limitation");throw i.limit=p,i}var a=s({},r,o({},n,(new Date).getTime()));return(0,c.setChromeSyncStore)({savedPosts:a}),s({},e,{savedPosts:a})}),o(a,f.VOZ_LIVING_UNSAVE_POST,function(e,t){var n=t.postId,r=e.savedPosts,o=s({},r);delete o[n];var i="voz_living_post_"+n;return window.localStorage.removeItem(i),(0,c.setChromeSyncStore)({savedPosts:o}),s({},e,{savedPosts:o})}),o(a,f.VOZ_LIVING_UPDATE_POST_TRACKER,function(e,t){var n=t.post,r=n.threadId,i=n.postId,a=n.postNum,u=n.page,f=e.threadTracker[r],d=(new Date).getTime(),p=l.default.isUndefined(f)||i>f.postId?{postId:i,postNum:a,page:u}:s({},f),h=s({},e.threadTracker,o({},r,s({},p,{lastView:d})));return(0,c.setChromeLocalStore)({threadTracker:h}),s({},e,{currentPost:t.post,threadTracker:h})}),a)},,,,,,,,,,,,,function(e,t,n){e.exports=n(6)(223)},function(e,t,n){e.exports=n(6)(229)},function(e,t,n){e.exports=n(6)(230)},function(e,t,n){e.exports=n(6)(231)},,,function(e,t,n){e.exports=n(6)(235)},function(e,t,n){"use strict";n(28)}]);